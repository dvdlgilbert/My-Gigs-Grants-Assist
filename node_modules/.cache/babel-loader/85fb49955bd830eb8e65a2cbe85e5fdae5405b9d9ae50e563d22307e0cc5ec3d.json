{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{findGrants}from\"./services/geminiService\";import ProfileForm from\"./components/ProfileForm\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const STORAGE_KEY=\"nonprofit_profile\";const GrantFinder=()=>{const[profile,setProfile]=useState({orgName:\"\",taxId:\"\",mission:\"\",goals:\"\",needs:\"\",address:\"\",contactName:\"\",contactPhone:\"\",email:\"\",website:\"\"});const[results,setResults]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[showForm,setShowForm]=useState(true);useEffect(()=>{const saved=localStorage.getItem(STORAGE_KEY);if(saved){try{setProfile(JSON.parse(saved));}catch(_unused){console.warn(\"Invalid profile JSON in localStorage\");}}},[]);const handleSaveProfile=async updatedProfile=>{setProfile(updatedProfile);localStorage.setItem(STORAGE_KEY,JSON.stringify(updatedProfile));setShowForm(false);setLoading(true);setError(null);try{const recs=await findGrants(updatedProfile);setResults(recs);}catch(err){setError(err.message||\"Search failed\");}finally{setLoading(false);}};const handleClearProfile=()=>{localStorage.removeItem(STORAGE_KEY);setProfile({orgName:\"\",taxId:\"\",mission:\"\",goals:\"\",needs:\"\",address:\"\",contactName:\"\",contactPhone:\"\",email:\"\",website:\"\"});setResults([]);setShowForm(true);};return/*#__PURE__*/_jsxs(\"div\",{className:\"grant-finder\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Grant Finder\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Enter your nonprofit profile to discover funding opportunities.\"}),showForm?/*#__PURE__*/_jsx(ProfileForm,{profile:profile,onSave:handleSaveProfile,onBack:()=>setShowForm(false)}):/*#__PURE__*/_jsxs(\"div\",{className:\"results mt-4 space-y-3\",children:[loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Searching for grants...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600\",children:error}),results.length===0&&!loading&&/*#__PURE__*/_jsx(\"p\",{children:\"No grants found. Try adjusting your profile.\"}),results.map((grant,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-md p-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold\",children:grant.grantName}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-slate-700\",children:[\"Funder: \",grant.funderName]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:grant.description}),/*#__PURE__*/_jsx(\"a\",{href:grant.website,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-600 underline text-sm\",children:\"Visit Website\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500 mt-1\",children:grant.matchReason})]},idx)),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(true),className:\"bg-slate-200 px-4 py-2 rounded-md hover:bg-slate-300\",children:\"Edit Profile\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClearProfile,className:\"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600\",children:\"Clear Profile\"})]})]})]});};export default GrantFinder;","map":{"version":3,"names":["React","useState","useEffect","findGrants","ProfileForm","jsx","_jsx","jsxs","_jsxs","STORAGE_KEY","GrantFinder","profile","setProfile","orgName","taxId","mission","goals","needs","address","contactName","contactPhone","email","website","results","setResults","loading","setLoading","error","setError","showForm","setShowForm","saved","localStorage","getItem","JSON","parse","_unused","console","warn","handleSaveProfile","updatedProfile","setItem","stringify","recs","err","message","handleClearProfile","removeItem","className","children","onSave","onBack","length","map","grant","idx","grantName","funderName","description","href","target","rel","matchReason","onClick"],"sources":["C:/Users/david/My-Gigs-Grants-Assist/src/GrantFinder.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { findGrants } from \"./services/geminiService\";\r\nimport type { NonprofitProfile, GrantRecommendation } from \"./types\";\r\nimport ProfileForm from \"./components/ProfileForm\";\r\n\r\nconst STORAGE_KEY = \"nonprofit_profile\";\r\n\r\nconst GrantFinder: React.FC = () => {\r\n  const [profile, setProfile] = useState<NonprofitProfile>({\r\n    orgName: \"\",\r\n    taxId: \"\",\r\n    mission: \"\",\r\n    goals: \"\",\r\n    needs: \"\",\r\n    address: \"\",\r\n    contactName: \"\",\r\n    contactPhone: \"\",\r\n    email: \"\",\r\n    website: \"\",\r\n  });\r\n\r\n  const [results, setResults] = useState<GrantRecommendation[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [showForm, setShowForm] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const saved = localStorage.getItem(STORAGE_KEY);\r\n    if (saved) {\r\n      try {\r\n        setProfile(JSON.parse(saved));\r\n      } catch {\r\n        console.warn(\"Invalid profile JSON in localStorage\");\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const handleSaveProfile = async (updatedProfile: NonprofitProfile) => {\r\n    setProfile(updatedProfile);\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(updatedProfile));\r\n    setShowForm(false);\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const recs = await findGrants(updatedProfile);\r\n      setResults(recs);\r\n    } catch (err: any) {\r\n      setError(err.message || \"Search failed\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClearProfile = () => {\r\n    localStorage.removeItem(STORAGE_KEY);\r\n    setProfile({\r\n      orgName: \"\",\r\n      taxId: \"\",\r\n      mission: \"\",\r\n      goals: \"\",\r\n      needs: \"\",\r\n      address: \"\",\r\n      contactName: \"\",\r\n      contactPhone: \"\",\r\n      email: \"\",\r\n      website: \"\",\r\n    });\r\n    setResults([]);\r\n    setShowForm(true);\r\n  };\r\n\r\n  return (\r\n    <div className=\"grant-finder\">\r\n      <h3>Grant Finder</h3>\r\n      <p>Enter your nonprofit profile to discover funding opportunities.</p>\r\n\r\n      {showForm ? (\r\n        <ProfileForm\r\n          profile={profile}\r\n          onSave={handleSaveProfile}\r\n          onBack={() => setShowForm(false)}\r\n        />\r\n      ) : (\r\n        <div className=\"results mt-4 space-y-3\">\r\n          {loading && <p>Searching for grants...</p>}\r\n          {error && <p className=\"text-red-600\">{error}</p>}\r\n          {results.length === 0 && !loading && (\r\n            <p>No grants found. Try adjusting your profile.</p>\r\n          )}\r\n          {results.map((grant, idx) => (\r\n            <div key={idx} className=\"border rounded-md p-3\">\r\n              <h4 className=\"font-bold\">{grant.grantName}</h4>\r\n              <p className=\"text-sm text-slate-700\">Funder: {grant.funderName}</p>\r\n              <p className=\"text-sm\">{grant.description}</p>\r\n              <a\r\n                href={grant.website}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"text-blue-600 underline text-sm\"\r\n              >\r\n                Visit Website\r\n              </a>\r\n              <p className=\"text-xs text-slate-500 mt-1\">{grant.matchReason}</p>\r\n            </div>\r\n          ))}\r\n          <div className=\"flex space-x-2 mt-4\">\r\n            <button\r\n              onClick={() => setShowForm(true)}\r\n              className=\"bg-slate-200 px-4 py-2 rounded-md hover:bg-slate-300\"\r\n            >\r\n              Edit Profile\r\n            </button>\r\n            <button\r\n              onClick={handleClearProfile}\r\n              className=\"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600\"\r\n            >\r\n              Clear Profile\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GrantFinder;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}