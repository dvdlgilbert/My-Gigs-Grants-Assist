{"ast":null,"code":"/**\r\n * Toggle flag: set to true for mock results, false for real API call.\r\n * In production you might replace this with an environment variable.\r\n */\nconst USE_MOCK = true;\n\n/**\r\n * findGrants\r\n * Given a nonprofit profile, returns a list of grant recommendations.\r\n * Typesafe: always returns Promise<GrantRecommendation[]>\r\n */\nexport async function findGrants(profile) {\n  // ✅ Check for API key\n  const apiKey = localStorage.getItem(\"gemini_api_key\");\n  if (!apiKey) {\n    throw new Error(\"No Gemini API key found. Please enter your API key.\");\n  }\n  if (USE_MOCK) {\n    // --- MOCKED RESULTS ---\n    const mockResults = [{\n      funderName: \"Community Foundation of Mississippi\",\n      grantName: \"Local Impact Grant\",\n      description: \"Supports nonprofits addressing community needs such as food security, housing, and education.\",\n      website: \"https://example.org/local-impact\",\n      matchReason: \"Matches your mission to support underserved communities.\"\n    }, {\n      funderName: \"National Arts Endowment\",\n      grantName: \"Arts Innovation Grant\",\n      description: \"Funds creative projects that expand access to arts and culture.\",\n      website: \"https://example.org/arts-innovation\",\n      matchReason: \"Aligns with your stated goals around cultural engagement.\"\n    }, {\n      funderName: \"Green Futures Fund\",\n      grantName: \"Sustainability Grant\",\n      description: \"Provides resources for nonprofits working on environmental sustainability and climate resilience.\",\n      website: \"https://example.org/sustainability\",\n      matchReason: \"Connects with your nonprofit’s environmental initiatives.\"\n    }];\n\n    // Simulate network delay\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    return mockResults;\n  }\n\n  // --- REAL API CALL ---\n  const response = await fetch(\"https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${apiKey}`\n    },\n    body: JSON.stringify({\n      contents: [{\n        parts: [{\n          text: `Suggest grant opportunities for a nonprofit with the following profile:\\n\n                Organization: ${profile.orgName}\\n\n                Mission: ${profile.mission}\\n\n                Goals: ${profile.goals}\\n\n                Needs: ${profile.needs}\\n\n                Address: ${profile.address}\\n\n                Contact: ${profile.contactName}, ${profile.contactPhone}, ${profile.email}\\n\n                Website: ${profile.website}\\n\n                Tax ID: ${profile.taxId}`\n        }]\n      }]\n    })\n  });\n  if (!response.ok) {\n    throw new Error(`Gemini API error: ${response.statusText}`);\n  }\n  const data = await response.json();\n\n  // TODO: Parse Gemini’s response into GrantRecommendation[]\n  // For now, return an empty array until parsing logic is defined.\n  return [];\n}","map":{"version":3,"names":["USE_MOCK","findGrants","profile","apiKey","localStorage","getItem","Error","mockResults","funderName","grantName","description","website","matchReason","Promise","resolve","setTimeout","response","fetch","method","headers","Authorization","body","JSON","stringify","contents","parts","text","orgName","mission","goals","needs","address","contactName","contactPhone","email","taxId","ok","statusText","data","json"],"sources":["C:/Users/david/My-Gigs-Grants-Assist/src/services/geminiService.ts"],"sourcesContent":["import type { NonprofitProfile, GrantRecommendation } from \"../types\";\r\n\r\n/**\r\n * Toggle flag: set to true for mock results, false for real API call.\r\n * In production you might replace this with an environment variable.\r\n */\r\nconst USE_MOCK = true;\r\n\r\n/**\r\n * findGrants\r\n * Given a nonprofit profile, returns a list of grant recommendations.\r\n * Typesafe: always returns Promise<GrantRecommendation[]>\r\n */\r\nexport async function findGrants(\r\n  profile: NonprofitProfile\r\n): Promise<GrantRecommendation[]> {\r\n  // ✅ Check for API key\r\n  const apiKey = localStorage.getItem(\"gemini_api_key\");\r\n  if (!apiKey) {\r\n    throw new Error(\"No Gemini API key found. Please enter your API key.\");\r\n  }\r\n\r\n  if (USE_MOCK) {\r\n    // --- MOCKED RESULTS ---\r\n    const mockResults: GrantRecommendation[] = [\r\n      {\r\n        funderName: \"Community Foundation of Mississippi\",\r\n        grantName: \"Local Impact Grant\",\r\n        description:\r\n          \"Supports nonprofits addressing community needs such as food security, housing, and education.\",\r\n        website: \"https://example.org/local-impact\",\r\n        matchReason: \"Matches your mission to support underserved communities.\",\r\n      },\r\n      {\r\n        funderName: \"National Arts Endowment\",\r\n        grantName: \"Arts Innovation Grant\",\r\n        description:\r\n          \"Funds creative projects that expand access to arts and culture.\",\r\n        website: \"https://example.org/arts-innovation\",\r\n        matchReason: \"Aligns with your stated goals around cultural engagement.\",\r\n      },\r\n      {\r\n        funderName: \"Green Futures Fund\",\r\n        grantName: \"Sustainability Grant\",\r\n        description:\r\n          \"Provides resources for nonprofits working on environmental sustainability and climate resilience.\",\r\n        website: \"https://example.org/sustainability\",\r\n        matchReason: \"Connects with your nonprofit’s environmental initiatives.\",\r\n      },\r\n    ];\r\n\r\n    // Simulate network delay\r\n    await new Promise((resolve) => setTimeout(resolve, 1000));\r\n    return mockResults;\r\n  }\r\n\r\n  // --- REAL API CALL ---\r\n  const response = await fetch(\r\n    \"https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent\",\r\n    {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${apiKey}`,\r\n      },\r\n      body: JSON.stringify({\r\n        contents: [\r\n          {\r\n            parts: [\r\n              {\r\n                text: `Suggest grant opportunities for a nonprofit with the following profile:\\n\r\n                Organization: ${profile.orgName}\\n\r\n                Mission: ${profile.mission}\\n\r\n                Goals: ${profile.goals}\\n\r\n                Needs: ${profile.needs}\\n\r\n                Address: ${profile.address}\\n\r\n                Contact: ${profile.contactName}, ${profile.contactPhone}, ${profile.email}\\n\r\n                Website: ${profile.website}\\n\r\n                Tax ID: ${profile.taxId}`,\r\n              },\r\n            ],\r\n          },\r\n        ],\r\n      }),\r\n    }\r\n  );\r\n\r\n  if (!response.ok) {\r\n    throw new Error(`Gemini API error: ${response.statusText}`);\r\n  }\r\n\r\n  const data = await response.json();\r\n\r\n  // TODO: Parse Gemini’s response into GrantRecommendation[]\r\n  // For now, return an empty array until parsing logic is defined.\r\n  return [];\r\n}\r\n"],"mappings":"AAEA;AACA;AACA;AACA;AACA,MAAMA,QAAQ,GAAG,IAAI;;AAErB;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeC,UAAUA,CAC9BC,OAAyB,EACO;EAChC;EACA,MAAMC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC;EACrD,IAAI,CAACF,MAAM,EAAE;IACX,MAAM,IAAIG,KAAK,CAAC,qDAAqD,CAAC;EACxE;EAEA,IAAIN,QAAQ,EAAE;IACZ;IACA,MAAMO,WAAkC,GAAG,CACzC;MACEC,UAAU,EAAE,qCAAqC;MACjDC,SAAS,EAAE,oBAAoB;MAC/BC,WAAW,EACT,+FAA+F;MACjGC,OAAO,EAAE,kCAAkC;MAC3CC,WAAW,EAAE;IACf,CAAC,EACD;MACEJ,UAAU,EAAE,yBAAyB;MACrCC,SAAS,EAAE,uBAAuB;MAClCC,WAAW,EACT,iEAAiE;MACnEC,OAAO,EAAE,qCAAqC;MAC9CC,WAAW,EAAE;IACf,CAAC,EACD;MACEJ,UAAU,EAAE,oBAAoB;MAChCC,SAAS,EAAE,sBAAsB;MACjCC,WAAW,EACT,mGAAmG;MACrGC,OAAO,EAAE,oCAAoC;MAC7CC,WAAW,EAAE;IACf,CAAC,CACF;;IAED;IACA,MAAM,IAAIC,OAAO,CAAEC,OAAO,IAAKC,UAAU,CAACD,OAAO,EAAE,IAAI,CAAC,CAAC;IACzD,OAAOP,WAAW;EACpB;;EAEA;EACA,MAAMS,QAAQ,GAAG,MAAMC,KAAK,CAC1B,oFAAoF,EACpF;IACEC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClCC,aAAa,EAAE,UAAUjB,MAAM;IACjC,CAAC;IACDkB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACnBC,QAAQ,EAAE,CACR;QACEC,KAAK,EAAE,CACL;UACEC,IAAI,EAAE;AACtB,gCAAgCxB,OAAO,CAACyB,OAAO;AAC/C,2BAA2BzB,OAAO,CAAC0B,OAAO;AAC1C,yBAAyB1B,OAAO,CAAC2B,KAAK;AACtC,yBAAyB3B,OAAO,CAAC4B,KAAK;AACtC,2BAA2B5B,OAAO,CAAC6B,OAAO;AAC1C,2BAA2B7B,OAAO,CAAC8B,WAAW,KAAK9B,OAAO,CAAC+B,YAAY,KAAK/B,OAAO,CAACgC,KAAK;AACzF,2BAA2BhC,OAAO,CAACS,OAAO;AAC1C,0BAA0BT,OAAO,CAACiC,KAAK;QACzB,CAAC;MAEL,CAAC;IAEL,CAAC;EACH,CACF,CAAC;EAED,IAAI,CAACnB,QAAQ,CAACoB,EAAE,EAAE;IAChB,MAAM,IAAI9B,KAAK,CAAC,qBAAqBU,QAAQ,CAACqB,UAAU,EAAE,CAAC;EAC7D;EAEA,MAAMC,IAAI,GAAG,MAAMtB,QAAQ,CAACuB,IAAI,CAAC,CAAC;;EAElC;EACA;EACA,OAAO,EAAE;AACX","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}