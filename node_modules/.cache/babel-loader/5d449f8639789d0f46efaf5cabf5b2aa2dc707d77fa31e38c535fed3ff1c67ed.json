{"ast":null,"code":"import React,{useState}from\"react\";import{findGrants}from\"../services/geminiService\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GrantFinder=_ref=>{let{profile,onCreateProject,grants,setGrants,useMock,onClear}=_ref;const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const performSearch=async()=>{setLoading(true);setError(null);try{localStorage.setItem(\"use_mock\",JSON.stringify(useMock));const results=await findGrants(profile);const limited=results.slice(0,Math.max(5,Math.min(7,results.length||6)));setGrants(limited);}catch(err){setError(err.message||\"Failed to fetch grant recommendations.\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Grant Recommendations\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-slate-600\",children:[\"Mode: \",/*#__PURE__*/_jsx(\"strong\",{children:useMock?\"Mock\":\"Real\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:performSearch,disabled:loading,className:\"bg-brand-primary text-white px-4 py-2 rounded-md hover:bg-brand-secondary\",children:loading?\"Searching...\":\"Initiate Grant Search\"}),/*#__PURE__*/_jsx(\"button\",{onClick:performSearch,disabled:loading,className:\"bg-slate-200 px-4 py-2 rounded-md hover:bg-slate-300\",children:loading?\"Searching...\":\"Find More Grants\"}),grants.length>0&&/*#__PURE__*/_jsx(\"button\",{onClick:onClear,className:\"bg-yellow-200 text-yellow-800 px-3 py-1 rounded-full text-xs font-semibold hover:bg-yellow-300\",children:\"Clear Results\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 mb-4\",children:error}),grants.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-lg shadow-sm p-6 bg-white\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-700\",children:\"No grant recommendations yet. Click \\u201CInitiate Grant Search\\u201D to fetch suggestions.\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:grants.map((grant,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg shadow-md p-6 bg-white flex flex-col justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold\",children:grant.funderName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-md font-semibold\",children:grant.grantName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-700 mt-2\",children:grant.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-slate-600 mt-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Reason:\"}),\" \",grant.matchReason]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onCreateProject(grant.grantName,grant.funderName),className:\"bg-green-500 text-white px-3 py-1 rounded-md hover:bg-green-600\",children:\"Create Project\"}),/*#__PURE__*/_jsx(\"a\",{href:grant.website,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-600 underline text-sm\",children:\"Application Page\"})]})]},\"\".concat(grant.funderName,\"-\").concat(grant.grantName,\"-\").concat(idx)))})]});};export default GrantFinder;","map":{"version":3,"names":["React","useState","findGrants","jsx","_jsx","jsxs","_jsxs","GrantFinder","_ref","profile","onCreateProject","grants","setGrants","useMock","onClear","loading","setLoading","error","setError","performSearch","localStorage","setItem","JSON","stringify","results","limited","slice","Math","max","min","length","err","message","className","children","onClick","disabled","map","grant","idx","funderName","grantName","description","matchReason","href","website","target","rel","concat"],"sources":["C:/Users/david/My-Gigs-Grants-Assist/src/components/GrantFinder.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { findGrants } from \"../services/geminiService\";\r\nimport type { NonprofitProfile, GrantRecommendation } from \"../types\";\r\n\r\ninterface GrantFinderProps {\r\n  profile: NonprofitProfile;\r\n  onCreateProject: (title?: string, funder?: string) => void;\r\n  grants: GrantRecommendation[];\r\n  setGrants: React.Dispatch<React.SetStateAction<GrantRecommendation[]>>;\r\n  useMock: boolean;\r\n  onClear: () => void;\r\n}\r\n\r\nconst GrantFinder: React.FC<GrantFinderProps> = ({\r\n  profile,\r\n  onCreateProject,\r\n  grants,\r\n  setGrants,\r\n  useMock,\r\n  onClear,\r\n}) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const performSearch = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      localStorage.setItem(\"use_mock\", JSON.stringify(useMock));\r\n      const results = await findGrants(profile);\r\n      const limited = results.slice(0, Math.max(5, Math.min(7, results.length || 6)));\r\n      setGrants(limited);\r\n    } catch (err: any) {\r\n      setError(err.message || \"Failed to fetch grant recommendations.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h2 className=\"text-2xl font-bold\">Grant Recommendations</h2>\r\n        <span className=\"text-sm text-slate-600\">\r\n          Mode: <strong>{useMock ? \"Mock\" : \"Real\"}</strong>\r\n        </span>\r\n      </div>\r\n\r\n      <div className=\"flex gap-2 mb-6\">\r\n        <button\r\n          onClick={performSearch}\r\n          disabled={loading}\r\n          className=\"bg-brand-primary text-white px-4 py-2 rounded-md hover:bg-brand-secondary\"\r\n        >\r\n          {loading ? \"Searching...\" : \"Initiate Grant Search\"}\r\n        </button>\r\n        <button\r\n          onClick={performSearch}\r\n          disabled={loading}\r\n          className=\"bg-slate-200 px-4 py-2 rounded-md hover:bg-slate-300\"\r\n        >\r\n          {loading ? \"Searching...\" : \"Find More Grants\"}\r\n        </button>\r\n        {grants.length > 0 && (\r\n          <button\r\n            onClick={onClear}\r\n            className=\"bg-yellow-200 text-yellow-800 px-3 py-1 rounded-full text-xs font-semibold hover:bg-yellow-300\"\r\n          >\r\n            Clear Results\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {error && <p className=\"text-red-600 mb-4\">{error}</p>}\r\n\r\n      {grants.length === 0 ? (\r\n        <div className=\"border rounded-lg shadow-sm p-6 bg-white\">\r\n          <p className=\"text-slate-700\">\r\n            No grant recommendations yet. Click “Initiate Grant Search” to fetch suggestions.\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          {grants.map((grant, idx) => (\r\n            <div\r\n              key={`${grant.funderName}-${grant.grantName}-${idx}`}\r\n              className=\"border rounded-lg shadow-md p-6 bg-white flex flex-col justify-between\"\r\n            >\r\n              <div>\r\n                <h3 className=\"text-lg font-bold\">{grant.funderName}</h3>\r\n                <p className=\"text-md font-semibold\">{grant.grantName}</p>\r\n                <p className=\"text-sm text-slate-700 mt-2\">{grant.description}</p>\r\n                <p className=\"text-sm text-slate-600 mt-2\">\r\n                  <strong>Reason:</strong> {grant.matchReason}\r\n                </p>\r\n              </div>\r\n              <div className=\"flex justify-between items-center mt-4\">\r\n                <button\r\n                  onClick={() => onCreateProject(grant.grantName, grant.funderName)}\r\n                  className=\"bg-green-500 text-white px-3 py-1 rounded-md hover:bg-green-600\"\r\n                >\r\n                  Create Project\r\n                </button>\r\n                <a\r\n                  href={grant.website}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"text-blue-600 underline text-sm\"\r\n                >\r\n                  Application Page\r\n                </a>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GrantFinder;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}